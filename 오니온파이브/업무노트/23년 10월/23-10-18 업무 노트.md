#오니온파이브 #업무노트


## 알아볼것들

- 지라 이슈 연결 유형
- 
## 정보
-[[Django ORM 체크리스트]]

## [[배포 프로세스]]

### 오전 미팅 내용
### Ticket 테이블 소개
- ticket_reply는 티켓에 대한 답변 정보를 담는 테이블
	- 화면상 티켓 답변은 다 ticket_reply
	- 아래 대화 쓰레드로 달리는 내용 중 사람이 쓴 경우만 ticket_reply
		- 로그성 데이터도 있음
	- 답변이 아닌, 메모로 남기게 되면 이메일은 발송이 안됨
	- 유형도 고객의 재문의, 상담원 답변으로 나뉨
	- ticket_reply는 대댓글 처럼 deps가 들어가는건 아님
		- 아마 이메일 기반으로 진행되니까 그런듯
- 이메일 찾을 때, 이메일 id라는 값으로 찾아서 답변 메일이 쓰레드에 달리는식(?)


- ticket_reply_log 는 쓰레드에 남겨지는 로그 데이터를 저장하는 테이블
	- ticket_reply랑 연관은 없고, ticket_main이랑 관련 있음

- ticket_reply_reserve는 티켓 답변 예약 발송과 관련된 테이블
	- ~분후 task를 시작하게 만들어 놨으나, 1시간 2시간 이후 지연전송 하겠다 하면 지연 전송되는 celery task가 두번 전송 될 수도 있음
	- oqupie 문서의 celery 레디스를 브로커로 쓸 때, 주의점 보기
	- 내생각에 CUD가 많이 일어나는 테이블인듯
- 

### 과제 설명
#### BUG-267
- 지식 창고 - 세부 정보에 가면 구분선이 있는데 선만 지우는 작업 일듯
- 아마 공통으로 사용되는 걸로 아는데 그걸 지우는걸로

#### REQ-61
- 지식창고 새로 만들 때, 에디터 글자 크기 조정이 h1,h2,h3밖에 없어서
- froala 공식문서에서 폰트 사이즈 찾아서 세팅 값 수정하는 방식으로 진행될 듯
- froala를 어디서 initialize하는지 찾아서 보고 수정하면 될 듯
- 

#### REQ-65
- 티켓에 들어가게 되면, 과거 내역부터 나오는데 바로 새로운 내역을 볼 수 있도록 하는 내용
	- 진행하진 않음

#### BUG-316
- 지식창고- 카테고리 - 문서가 있음
- 카테고리 삭제시, 문서도 삭제되니까 경고 문구를 강화해주는 작업
- 바로하기에는 무리가 있을수도
- 

다음 과제 내용
- 가입일로 부터 ~일 이후에 안내 이메일을 보내는 것
	- celery crontab
	- celery랑 worker, celery beat에 대한 학습이 필요할듯
	- celery beat를 하루에 한번씩 돌리는 방법을 알아야 함
	- 특정 task를 호출하는 방법을 알아야 함
	- 함수에서 조건에 따라서, 사용자를 찾는 것
	- 찾은 사용자한테 이메일을 발송하는 걸 알아야함
	- 비동기와 쿼리, 메일 발송을 체험해 볼 수 있음
	- 할때 celery.py 참고
	- task의 의미는 무엇인지, schedule의 의미는 무엇인지
	- 데코레이터는 어떤걸 달아야 함수가 호출이 될건지
		- 예외 처리는 어떻게 할지, 로깅은 어떻게 할지
	- beat는 schedule성으로 돌리기 때문에 필요함, 그렇지 않으면 beat가 필요하지 않음
	- 

## 무얼했는가?

- [x] BUG-265 브랜치 따고, git PR 남기기 ✅ 2023-10-18
- [ ] REQ-61 시작



